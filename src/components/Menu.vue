<template>
  <v-container>
    <div class="header">
      <p class="menu_title">주문하기</p>

      <div class="right_icons">
        <CartIcon />
      </div>
    </div>

    <!-- 상위 탭 컨테이너 -->
    <v-tabs v-model="mainTab" color="black" class="no_padding" background-color="white"
      grow>
      <v-tab>커피</v-tab>
      <v-tab>음료</v-tab>
      <v-tab>푸드</v-tab>
      <v-tab>아이스크림</v-tab>
      <v-tab>상품</v-tab>
    </v-tabs>

    <!-- 상위 탭 컨텐츠 -->
    <v-tabs-items v-model="mainTab">
      <!-- 커피 탭 컨텐츠 -->
      <v-tab-item class="tb_style">
    <v-chip-group v-model="coffeeTab" mandatory>
      <v-chip
      v-for="(tab, index) in coffeeTabs"
      :key="index"
      :value="index"
    >{{ tab }}</v-chip>
        </v-chip-group>

        <v-tabs-items v-model="coffeeTab">
          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in coffeeList" :key="item.Id" 
              @click="goToDetail(item.Id)">
                  <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in letteList" :key="item.Id" @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in espressoList" :key="item.Id" @click="goToDetail(item.Id)">
                  <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>
        </v-tabs-items>
      </v-tab-item>

      <!-- 음료 탭 컨텐츠 -->
      <v-tab-item>
        <v-chip-group v-model="beverageTab" mandatory>
          <v-chip dark v-for="(tab, index) in beverageTabs" :key="index" :value="index">{{ tab }}</v-chip>
        </v-chip-group>
        <v-tabs-items v-model="beverageTab">
          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in FrappeList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in AdeList" :key="item.Id"             
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in yogurtList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in ChocolateList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in TeaList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>
        </v-tabs-items>
      </v-tab-item>

      <!-- 푸드 탭 컨텐츠 -->
      <v-tab-item>
        <v-chip-group v-model="FoodTab" mandatory>
          <v-chip dark v-for="(tab, index) in foodTabs" :key="index"
          
          :value="index">{{ tab }}</v-chip>
        </v-chip-group>

        <v-tabs-items v-model="FoodTab">
          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in bakeryList" :key="item.Id" 
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in SandwichList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in CakeList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in NataList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>
        </v-tabs-items>
      </v-tab-item>

      <!-- 아이스크림 탭 컨텐츠 -->
      <v-tab-item>
        <v-chip-group v-model="iceCream" mandatory>
          <v-chip dark v-for="(tab, index) in iceCreamTabs" :key="index" :value="index">{{ tab }}</v-chip>
        </v-chip-group>

        <v-tabs-items v-model="iceCream">
          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in MilkList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>
        </v-tabs-items>
      </v-tab-item>

      <!-- 상품 탭 컨텐츠 -->
      <v-tab-item>
        <v-chip-group v-model="Product" mandatory>
          <v-chip dark v-for="(tab, index) in productTabs" :key="index" :value="index">{{ tab }}</v-chip>
        </v-chip-group>

        <v-tabs-items v-model="Product">
          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in BaristaProductList" :key="item.Id"
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>

          <v-tab-item>
            <v-list>
              <v-list-item v-for="item in ProductList" :key="item.Id" 
              @click="goToDetail(item.Id)">
                    <div class="menulist_box">
                      <v-img class="img-rounded" :src="item.imgUrl" cover />
                    <div class="menulist_title">
                      <p>{{ item.Title }}</p>
                      <span>{{ item.BasePrice }} 원</span>
                    </div>
                  </div>
              </v-list-item>
            </v-list>
          </v-tab-item>
        </v-tabs-items>
      </v-tab-item>
    </v-tabs-items>


<div class="select_store">
    <div v-if="selectedStore">
      <p> 
    <v-icon color="#ffffff">
      location_on
    </v-icon> {{ selectedStore.name }}</p>
    </div>
    <div v-else>
      <p>매장 정보가 선택되지 않았습니다.</p>
    </div>
    <router-link :to="{ path: '/StoreSelection' }">
      <v-btn class="select_store_btn">
        선택
      </v-btn>
    </router-link>
  </div>
</v-container>
</template>


<script>
import itemlist from '@/datasources/itemlist.js';
import CartIcon from '@/components/Carticon';
// import { useToast } from 'vue-toastification';
export default {
  components: {
    CartIcon
  },
  data() {
    return {
      mainTab: 0,
      coffeeTab: 0,
      beverageTab: 0,
      FoodTab: 0,
      iceCream: 0,
      Product: 0,
      coffeeTabs: ['Coffee', 'Latte', 'Espresso'],
      beverageTabs: ['Frappe', 'Ade', 'Yogurt', 'Chocloate', 'Tea'],
      foodTabs: ['Bakery', 'Sandwich', 'Cake', 'Nata'],
      iceCreamTabs: ['Ice Cream'],
      productTabs: ['Barista', 'Tumbler'],

      coffeeList: itemlist.coffeeList,
      letteList: itemlist.LetteList,
      espressoList: itemlist.EspressoList,
      FrappeList: itemlist.FrappeList,
      AdeList: itemlist.AdeList,
      yogurtList: itemlist.yogurtList,
      ChocolateList: itemlist.ChocolateList,
      TeaList: itemlist.TeaList,
      bakeryList: itemlist.bakeryList,
      SandwichList: itemlist.SandwichList,
      CakeList: itemlist.CakeList,
      NataList: itemlist.NataList,
      MilkList: itemlist.MilkList,
      BaristaProductList: itemlist.BaristaProductList,
      ProductList: itemlist.ProductList
    };
  },
  methods: {
    goToDetail(id) {
      console.log('Selected Store:', this.selectedStore);
      if (!this.selectedStore || !this.selectedStore.name) {
      this.$toast.error('매장을 먼저 선택해주세요.');
      // this.$router.push('/StoreSelection')

      return; 
    }
    // 매장이 선택되었을 때 주문 디테일 페이지로 이동
    this.$router.push({ name: 'MenuDetail', params: { id } });
    }
  },
  computed: {

    // 매장 선택
    selectedStore() {
      return this.$store.getters.selectedStore;
    }
  }

};
</script>
<style scoped>
.select_store{
  display: flex;
  align-items: center;
  /* justify-content: space-between; */
  width: 100%;
  max-width: 500px;
  
  justify-content: center;
  height: 60px;
  align-items: center;
  background: #503629;
  position: fixed;
  
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  color: #fff;
  font-size: 18px;
  font-weight: bold;
  bottom: 70px;
  padding: 15px 15px;
  box-sizing: border-box;
}
.select_store_btn{
  padding: 5px 5px !important;
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  box-sizing: border-box;
  height: 30px !important;
  width: 55px !important;
  background: #ffffff !important;
  border-radius: 50px;
  box-shadow: 0px 1px 1px 1px rgba(0,0,0,0.2) !important;
  font-size: 12px !important;
}

.coverer{
  padding:  0;
  margin: 0;
}

.v-tabs {
  white-space: nowrap;
  overflow-x: auto; 
}

.v-tabs__wrapper {
  flex-wrap: nowrap; 
}

.v-tab {
  min-width: auto;
}
.v-chip-group{
  padding: 10px 10px !important;
}
.v-chip-group .v-slide-group__content {
  padding: 20px 20px !important;
  box-sizing: border-box !important;
}

.v-chip {
  background: #ffffff !important;
  border: 1.5px solid #000000 !important; 
  color: #000000 !important;
  min-width: 100px !important;
  display: block !important;
  text-align: center !important;
}

.v-chip.v-chip--active {
  background: #000000 !important;
  color: #ffffff !important; 
  border-color: #000000 !important;
}

.menulist_box {
  display: flex;
  align-items: center;
  gap: 10px;
}
.img-rounded {
  border-radius: 20px !important;
  border: 1px solid #fbfbfb;
  width: 100px; 
  height: 100px; 
}
.menulist_title{
  display: flex;
  flex-direction: column;
  margin-left: 15px !important;
  /* gap: 5px; */
}
.menulist_title > p{
  font-size: 18px;
  margin: 0 !important;
  font-weight: bold;
}
.menulist_title > span{
  font-size: 18px;
}
.menulist_box v-image{
  box-shadow: 1px 1px 1px 1px rgba(0,0,0,0.5);
}
.v-list-item {
  padding: 10px 10px !important;
  box-sizing: border-box;
  position: relative;
  border-radius: 20px;
  /* background: #fbfbfb; */
  /* box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.1); */
}
</style>

